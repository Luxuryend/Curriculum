# 决策树特征选择：基尼指数 (Gini Index) 计算实例

本案例展示了如何使用基尼指数来评估“天气”和“温度”特征，从而确定决策树（CART算法）的最优切分点。

## 1. 计算公式

* **基尼指数 (Gini Index):** $$Gini(D) = 1 - \sum_{i=1}^{k} p_i^2$$
* **加权基尼指数 (Weighted Gini Index):**
    $$Gini_{split}(D) = \frac{|D_1|}{|D|}Gini(D_1) + \frac{|D_2|}{|D|}Gini(D_2)$$

---

## 2. 特征评估：天气 (Weather)
总样本量 $N = 10$。天气包含：晴、阴、雨。

### 方案 A: 晴 vs {阴, 雨}
| 分组 | 样本数 | 是/否 | 基尼指数计算 |
| :--- | :--- | :--- | :--- |
| **晴** | 4 | 1是, 3否 | $1 - (\frac{1}{4})^2 - (\frac{3}{4})^2 = \frac{3}{8}$ |
| **阴+雨** | 6 | 4是, 2否 | $1 - (\frac{4}{6})^2 - (\frac{2}{6})^2 = \frac{4}{9}$ |

**加权基尼指数:** $\frac{4}{10} \cdot \frac{3}{8} + \frac{6}{10} \cdot \frac{4}{9} = \frac{5}{12} \approx \mathbf{0.416}$

### 方案 B: 阴 vs {晴, 雨}
| 分组 | 样本数 | 是/否 | 基尼指数计算 |
| :--- | :--- | :--- | :--- |
| **阴** | 3 | 3是, 0否 | $1 - (\frac{3}{3})^2 - 0 = 0$ |
| **晴+雨** | 7 | 2是, 5否 | $1 - (\frac{2}{7})^2 - (\frac{5}{7})^2 = \frac{20}{49}$ |

**加权基尼指数:** $\frac{3}{10} \cdot 0 + \frac{7}{10} \cdot \frac{20}{49} = \frac{2}{7} \approx \mathbf{0.285}$

### 方案 C: 雨 vs {晴, 阴}
| 分组 | 样本数 | 是/否 | 基尼指数计算 |
| :--- | :--- | :--- | :--- |
| **雨** | 3 | 1是, 2否 | $1 - (\frac{1}{3})^2 - (\frac{2}{3})^2 = \frac{4}{9}$ |
| **晴+阴** | 7 | 4是, 3否 | $1 - (\frac{4}{7})^2 - (\frac{3}{7})^2 = \frac{24}{49}$ |

**加权基尼指数:** $\frac{3}{10} \cdot \frac{4}{9} + \frac{7}{10} \cdot \frac{24}{49} = \frac{10}{21} \approx \mathbf{0.476}$

---

## 3. 特征评估：温度 (Temperature)

### 方案: 热 vs 正常
| 分组 | 样本数 | 是/否 | 基尼指数计算 |
| :--- | :--- | :--- | :--- |
| **热** | 4 | 2是, 2否 | $1 - (\frac{1}{2})^2 - (\frac{1}{2})^2 = 0.5$ |
| **正常** | 6 | 3是, 3否 | $1 - (\frac{1}{2})^2 - (\frac{1}{2})^2 = 0.5$ |

**加权基尼指数:** $\frac{4}{10} \cdot 0.5 + \frac{6}{10} \cdot 0.5 = \mathbf{0.5}$

---

## 4. 实验结论

根据计算结果，各划分方案的基尼指数如下：

1.  **天气 (阴 vs 其他): 0.285** 🏆 (最优)
2.  天气 (晴 vs 其他): 0.416
3.  天气 (雨 vs 其他): 0.476
4.  温度 (热 vs 正常): 0.500

**结论：** 在构建决策树时，应首先选择 **“天气”** 特征，并按照 **“是否为阴天”** 进行第一次节点划分。
