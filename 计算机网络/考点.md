# 第一章 概述

## 一、 网络概述与组成
### 1. 三大类网络（三网融合）
* **电信网络**：提供传统语音服务。
* **有线电视网络**：提供视频节目传输。
* **计算机网络**：核心是数据通信和资源共享，发展最快。

### 2. 互联网的组成
* **边缘部分**：由所有连接在互联网上的**主机**组成。
* **核心部分**：由大量网络和连接这些网络的**路由器**组成。

> **基本特点**：互联网具有**连通性**和**共享**（资源共享，可以是信息共享、软件共享）。

### 3. 交换方式
* **电路交换 (Circuit Switching)**：
    * **过程**：建立连接 $\rightarrow$ 通话 $\rightarrow$ 释放连接。
    * **特点**：在通话的全部时间内，通话的两个用户始终占用端到端的通信资源。
    * **缺点**：当使用电路交换来传送计算机数据时，其线路的传输效率往往很低。
* **分组交换 (Packet Switching)**：
    * **优点**：高效、灵活、迅速、可靠。

---

## 二、 网络的分类
### 1. 按照网络作用范围分类
| 英文缩写 | 中文名称 |
| :--- | :--- |
| **WAN** | 广域网 |
| **MAN** | 城域网 |
| **LAN** | 局域网 |
| **PAN** | 个人区域网 |

### 2. 按照网络使用者分类
* **公用网**：面向公众提供服务。
* **专用网**：由单位或部门为特定业务建设。

---

## 三、 网络性能指标
### 1. 速率、带宽与吞吐量
* **速率**：指数据的传输快慢，即单位时间内传输的比特（bit）数量。单位为 $bit/s$，记作 **bps**。
* **带宽**：
    * **通信领域**：指信号所占据的频率范围，单位是**赫兹 (Hz)**。
    * **计算机网络**：指信道的最高数据传输速率（发送能力），单位是 **bps**。
    * *直观理解*：带宽就像高速公路的车道宽度。车道越多，单位时间内通过的车辆上限越高。
* **吞吐量**：指单位时间内成功传送的数据量。受到网络拥塞等影响，**吞吐量永远小于或等于带宽**。

### 2. 总时延 (Total Delay)

$$
\text{总时延} = \text{发送时延} + \text{传播时延} + \text{处理时延} + \text{排队时延}
$$

| 时延组成 | 详细定义 |
| :--- | :--- |
| **发送时延** | 主机或路由器发送数据帧所需时间，即把所有比特“推”向媒体的时间。 |
| **传播时延** | 电磁波在信道中（如光纤）传播一定距离所需的时间。 |
| **处理时延** | 主机或路由器在收到分组时，为处理分组所花费的时间。 |
| **排队时延** | 分组在路由器的输入/输出队列中等待处理或转发的时间。 |

---

## 四、 五层协议体系结构


| 层级 | 层名称 (Layer) | 主要功能 | 对应数据单元 | 典型协议/实例 |
| :--- | :--- | :--- | :--- | :--- |
| **第 5 层** | **应用层** | 直接为用户的应用进程提供服务 | 报文 | HTTP, FTP, DNS, SMTP, Telnet |
| **第 4 层** | **运输层** | 负责主机中两个进程之间的通用数据传输 | 报文段 / 用户数据报 | TCP, UDP |
| **第 3 层** | **网络层** | 负责为分组交换网上的不同主机提供通信服务，路由选择 | IP数据报 | IP, ICMP, OSPF, ARP |
| **第 2 层** | **数据链路层** | 在相邻节点之间传送数据帧，错误检测与纠正 | 帧 | PPP, Ethernet, VLAN |
| **第 1 层** | **物理层** | 透明地传送比特流，规定接口的物理特性 | 比特 | 光纤、双绞线、调制解调器 |

### 网络协议三要素
1. **语法**：数据与控制信息的结构或格式。
2. **语义**：需要发出何种控制信息，完成何种动作以及作出何种响应。
3. **同步**：事件实现顺序的详细说明。

---
# 第二章 物理层

## 五、 物理层通信基础
### 1. 信息交互方式
* **单向通信**：又称单工，只能一方发送，一方接收。
* **双向交替通信**：又称半双工，双方均可发送，但不能同时发送。
* **双向同时通信**：又称全双工，双方可以同时发送和接收。

### 2. 信噪比与香农公式 (Shannon's Formula)
* **信噪比**：信号功率与噪声功率的比值。如果噪声太大，接收端就无法分辨原始信号。
* **香农公式**：推导出在有随机热噪声的信道中，理论上的最大信息传输速率（信道容量）。

> **结论**：信道的带宽或信噪比较大，信息的极限传输速率 $C$ 就越高。

### 3. 传输媒体与复用技术
* **导引型传输媒体**：双绞线、同轴电缆、光缆。
* **非导引型传输媒体**
* **信道复用技术**：频分复用、时分复用 和统计时分复用。

---
# 第三章 数据链路层

## 六、 数据链路层核心技术
### 1. 三个基本问题
* **封装成帧**：在数据前后添加首部和尾部确定帧边界。
* **透明传输**：解决数据中出现与控制信息相同比特组合的问题。
* **差错检查**：**CRC** 是一种检错方法，**FCS** 是添加在数据后面的冗余码。

### 2. 透明传输的实现
* **字节填充**：遇到 `0x7E` $\rightarrow$ `0x7D, 0x5E`；遇到 `0x7D` $\rightarrow$ `0x7D, 0x5D`。
* **零比特填充**：只要发现 **5 个连续的 1**，就立即在其后填充一个 **0**。


### 3. CSMA/CD 协议（以太网）
* **多点接入**：多台计算机连接在一根总线上。
* **载波监听**：发送前先监听信道（先听后发）。
* **碰撞检测**：发送过程中不断检测电平跳变（边听边发，碰后即停）。

### 4. 10BASE-T 含义
* **10**：代表数据率为 **10 Mb/s**。
* **BASE**：代表连接线上的信号是**基带信号**。
* **T**：代表**双绞线**。

---
# 第四章 网络层

## 三个协议
ARP地址解析协议   ICMP网际控制报文协议   IGMP网际组管理协议

## 中间设备
物理层使用的中间设备是**转发器**  
数据链路层使用的中间设备是**网桥**和**交换机**  
网络层使用的中间设备是**路由器**  

## IP地址
IP地址由网络号和主机号组成，共32位  

| 地址类别 | 第一个八位组范围 | 子网掩码 & 前缀表示 | 网络位长度 | 主机位长度 |
| :------- | :--------------- | :------------------ | :--------- | :--------- |
| A类      | 1 ~ 126          | 255.0.0.0  /8       | 8位        | 24位       |
| B类      | 128 ~ 191        | 255.255.0.0  /16    | 16位       | 16位       |
| C类      | 192 ~ 223        | 255.255.255.0  /24  | 24位       | 8位        |

网络地址 = IP地址 & 子网掩码 （二进制and与运算）  
MAC地址是48位   6个字节  
IPV6 128位  
零压缩：前缀0可以省略，至少保留一个0。连续多个全零组可用双冒号::代替  
IPV4向IPV6过度的协议：**双协议栈**和**隧道技术**

---
# 第五章 运输层

### UDP
UDP：无连接 尽最大努力交付 面向报文 没有拥塞机制 支持一对一、一对多、多对多 首部开销小  
### TCP
TCP：面向连接的运输层协议 每一条TCP连接只能两个端点 提供可靠交付的服务 提供全双工通信 面向字节流

TCP连接端点是套接字。**套接字**socket=(IP地址:端口号)  

## 连续ARQ协议
采用累计确认机制，接收方仅对按序到达的最后一个分组发送确认。若某分组丢失，则发送方回退N步

## TCP报文
TCP报文段的首部格式，前20个字节固定，TCP首部最小长度是20字节  
若确认号=N，则表明到序号N-1为止的所有数据都正确收到

### ACK
确认ACK，仅当ACK＝1时确认号字段才有效；当ACK＝0时，确认号无效。  
TCP规定，在连接建立后所有传送的报文段都必须把ACK置为1。  
同步SYN，在连接建立时用来同步序号。当SYN=1而ACK=0时，表明这是一个连接请求报文段。对方若同意建立连接，则应在响应的报文段中使SYN=1和ACK=1。  
因此，SYN置为1就表示这是一个连接请求或连接接受报文。  
终止FIN，用来释放一个连接。当FIN=1时，表明此报文段的发送方的数据已发送完毕，并要求释放运输连接。  

## 拥塞控制
TCP进行拥塞控制的算法有四种：**慢开始，拥塞避免，快重传，快恢复**

## 连接建立
TCP的运输管理  
连接建立三报文  
连接释放四报文  

---
# 第六章 应用层

**FTP**（文件传送协议）  
万维网（URL：统一资源定位符：协议：//主机名：端口/路径）

电子邮件  
三个主要构建用户代理、邮件服务器、邮件发送协议（SMTP）、邮件读取协议（POP3） 

**DHCP**（动态主机配置协议）分配IP地址
